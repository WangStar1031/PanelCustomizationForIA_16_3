{
  "createdBy" : "connie@iacustomer.com",
  "createdDate" : null,
  "lastModifiedBy" : "connie@iacustomer.com",
  "lastModifiedDate" : null,
  "name" : "37127c50-87a6-4775-9b86-94711aed154e",
  "query" : "import module namespace sias=\"urn:x-sig:sias:util:fn\";\n\ndeclare namespace ia = \"urn:x-emc:ia:schema:fn\";\ndeclare namespace table=\"urn:x-emc:ia:schema:table\";\n\ndeclare variable $page external;\ndeclare variable $size external;\n\ndeclare variable $sZHBUKRS external;\ndeclare variable $sZHHKONT external;\ndeclare variable $sZHFUEKZ external;\n\n\ndeclare function local:getResultsPage($rows, $page, $size) \n{\n  let $offset := $page * $size\n  let $total := count($rows)\n  return <results total=\"{ $total }\"> {\n    for $row in subsequence($rows, $offset + 1, $size)\n      return $row\n  } </results>\n};\n\ndeclare function local:addClause($whereClause as xs:string, $var as xs:string*, $expr as xs:string) as xs:string\n{\n\tif (empty($var) or $var = \"\")\n\tthen $whereClause\n\telse if ($whereClause = \"\") then $expr else concat($whereClause, \" and \", $expr)\n};\n\n\nlet $whereClause := local:addClause(\"\", $sZHBUKRS, concat(\"contains($rs/ZHBUKRS, &apos;\", $sZHBUKRS, \"&apos;)\"))\nlet $whereClause := local:addClause($whereClause, $sZHHKONT, concat(\"contains($rs/ZHHKONT, &apos;\", $sZHHKONT, \"&apos;)\"))\nlet $whereClause := local:addClause($whereClause, $sZHFUEKZ, concat(\"contains($rs/ZHFUEKZ, &apos;\", $sZHFUEKZ, \"&apos;)\"))\nlet $whereClause := if ($whereClause != \"\") then concat(\"where \", $whereClause) else $whereClause  \n   \n\nlet $query-str := concat(\"for $rs in /SAP/ZRT17/ROW \", $whereClause, \" return $rs\") \n \nlet $main-query := xhive:evaluate($query-str)\n\nlet $rows :=  \n               for $rs in $main-query\n\t\tlet $ZHMANDT := $rs/ZHMANDT/text()\n\t\tlet $ZHBUKRS := $rs/ZHBUKRS/text()\n\t\tlet $ZHHKONT := $rs/ZHHKONT/text()\n\t\tlet $ZHLFDNR := $rs/ZHLFDNR/text()\n\t\tlet $ZHGKKZ := $rs/ZHGKKZ/text()\n\t\tlet $ZHFUEKZ := $rs/ZHFUEKZ/text()\n\t\tlet $ZHBUEKZ := $rs/ZHBUEKZ/text()\n\t\tlet $ZHKOSTL_FROM := $rs/ZHKOSTL_FROM/text()\n\t\tlet $ZHKOSTL_TO := $rs/ZHKOSTL_TO/text()\n\t\tlet $ZHAUFART := $rs/ZHAUFART/text()\n\t\tlet $ZHAUFNR := $rs/ZHAUFNR/text()\n\t\tlet $ZHPSPNR := $rs/ZHPSPNR/text()\n\t\tlet $ZHPRCTR_FROM := $rs/ZHPRCTR_FROM/text()\n\t\tlet $ZHPRCTR_TO := $rs/ZHPRCTR_TO/text()\n    \nreturn\n<row id='{string($rs/@table:id)}'>\n\t<column name='cZHMANDT'>{ $ZHMANDT }</column>\n\t<column name='cZHBUKRS'>{ $ZHBUKRS }</column>\n\t<column name='cZHHKONT'>{ $ZHHKONT }</column>\n\t<column name='cZHLFDNR'>{ $ZHLFDNR }</column>\n\t<column name='cZHGKKZ'>{ $ZHGKKZ }</column>\n\t<column name='cZHFUEKZ'>{ $ZHFUEKZ }</column>\n\t<column name='cZHBUEKZ'>{ $ZHBUEKZ }</column>\n\t<column name='cZHKOSTL_FROM'>{ $ZHKOSTL_FROM }</column>\n\t<column name='cZHKOSTL_TO'>{ $ZHKOSTL_TO }</column>\n\t<column name='cZHAUFART'>{ $ZHAUFART }</column>\n\t<column name='cZHAUFNR'>{ $ZHAUFNR }</column>\n\t<column name='cZHPSPNR'>{ $ZHPSPNR }</column>\n\t<column name='cZHPRCTR_FROM'>{ $ZHPRCTR_FROM }</column>\n\t<column name='cZHPRCTR_TO'>{ $ZHPRCTR_TO }</column>\n</row>\n\nreturn local:getResultsPage($rows, $page, $size)\n\n",
  "moduleNamespaces" : [ "urn:x-sig:sias:util:fn" ],
  "searchName" : "ZRT17",
  "compositionName" : "Set 1"
}